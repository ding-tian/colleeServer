(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-551bbc70"],{"305b":function(t,o,s){"use strict";s.r(o);var a=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"secure"},[s("van-nav-bar",{attrs:{title:"安全中心","left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":t.back}}),s("BgBox",[s("div",{staticClass:"cell-box"},[s("van-cell",{attrs:{title:"修改密码","is-link":"",center:!0},on:{click:t.openPasswordBox}}),s("van-cell",{attrs:{title:"注销账号","is-link":"",center:!0},on:{click:t.destroyAccount}})],1)]),s("div",{staticClass:"logout-box"},[s("van-button",{attrs:{color:"#422f29",block:"",round:""},on:{click:t.logout}},[t._v("退出登录")])],1),s("van-popup",{attrs:{"is-link":"",position:"bottom",closeable:""},model:{value:t.isOpen,callback:function(o){t.isOpen=o},expression:"isOpen"}},[s("div",{staticClass:"form-box"},[s("div",{staticClass:"form-title"},[t._v("修改密码")]),s("van-form",[s("van-field",{attrs:{type:t.isPassword?"password":"text",name:"旧密码",label:"旧密码",placeholder:"旧密码(首字符必须为字母)","right-icon":t.isPassword?"closed-eye":"eye-o",autocomplete:"off"},on:{"click-right-icon":t.toggleType},model:{value:t.password.oldPassword,callback:function(o){t.$set(t.password,"oldPassword",o)},expression:"password.oldPassword"}}),s("van-field",{attrs:{type:t.isPassword?"password":"text",name:"新密码",label:"新密码",placeholder:"新密码(首字符必须为字母)","right-icon":t.isPassword?"closed-eye":"eye-o",autocomplete:"off"},on:{"click-right-icon":t.toggleType},model:{value:t.password.newPassword,callback:function(o){t.$set(t.password,"newPassword",o)},expression:"password.newPassword"}}),s("div",{staticClass:"commit-btn"},[s("van-button",{attrs:{round:"",block:"",color:"#422f29"},on:{click:t.commit}},[t._v("提交")])],1)],1)],1)])],1)},e=[],n=(s("d42c"),s("928f")),i=s("e3a8"),r={name:"Secure",components:{BgBox:n["a"]},data:function(){return{isOpen:!1,isPassword:!0,password:{oldPassword:"",newPassword:""}}},methods:{back:function(){this.$router.go(-1)},toggleType:function(){this.isPassword=!this.isPassword},openPasswordBox:function(){this.isOpen=!0},destroyAccount:function(){var t=this;this.$dialog.confirm({title:"注销账号",message:"是否确定注销账号，一旦注销无法恢复！",confirmButtonColor:"#0C34BA"}).then((function(){var o=localStorage.getItem("__tk");if(!o)return t.$toast("请先登录"),t.$router.push({name:"Login"});t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),t.axios({method:"POST",url:"/destroyAccount",data:{appkey:t.appkey,tokenString:o}}).then((function(o){t.$toast.clear(),700==o.data.code?t.$router.push({name:"Login"}):"G001"==o.data.code&&setTimeout((function(){localStorage.removeItem("__tk"),t.$router.push({name:"Login"})}),800),t.$toast(o.data.msg)})).catch((function(o){t.$toast.clear()}))})).catch((function(t){}))},logout:function(){var t=this;this.$dialog.confirm({title:"退出登录",message:"是否确定退出登录！",confirmButtonColor:"#0C34BA"}).then((function(){t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),setTimeout((function(){t.$toast.clear(),localStorage.removeItem("__tk"),t.$router.push({name:"Login"})}),800)})).catch((function(t){}))},commit:function(){var t=this,o={oldPassword:{value:this.password.oldPassword,errorMsg:"旧密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/},newPassword:{value:this.password.newPassword,errorMsg:"新密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/}},s=i["a"].valid(o);if(s){if(this.password.newPassword==this.password.oldPassword)return void this.$toast("新密码和旧密码不能相同");var a=localStorage.getItem("__tk");if(!a)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/updatePassword",data:{appkey:this.appkey,tokenString:a,password:this.password.newPassword,oldPassword:this.password.oldPassword}}).then((function(o){t.$toast.clear(),700==o.data.code?t.$router.push({name:"Login"}):"E001"==o.data.code&&setTimeout((function(){localStorage.removeItem("__tk"),t.$router.push({name:"Login"})}),800),t.$toast(o.data.msg)})).catch((function(o){t.$toast.clear()}))}}}},c=r,l=s("2877"),d=Object(l["a"])(c,a,e,!1,null,"7fd12b3b",null);o["default"]=d.exports},"928f":function(t,o,s){"use strict";var a=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"bg-box"},[s("div",{staticClass:"bg"}),s("div",{staticClass:"bg-content"},[t._t("default")],2)])},e=[],n={name:"BgBox"},i=n,r=(s("f56e"),s("2877")),c=Object(r["a"])(i,a,e,!1,null,"0dcd8daa",null);o["a"]=c.exports},b25e:function(t,o,s){},d42c:function(t,o,s){},f56e:function(t,o,s){"use strict";s("b25e")}}]);
//# sourceMappingURL=chunk-551bbc70.a5efe8cc.js.map